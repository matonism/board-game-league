(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(8),l=n.n(c),r=(n(13),n(3)),i=n(4),o=n(6),d=n(5),u=(n(14),n(2)),h={MOCK_API:!1,SERVER_URL:"https://6k70mthaui.execute-api.us-east-2.amazonaws.com",COOKIE_USER_KEY:"user",COOKIE_USERNAME_KEY:"username",COOKIE_USER_EMAIL_KEY:"email",COOKIE_HOURS_EXPIRATION:5,SCREEN_HOME:"Home",SCREEN_USER_PROFILE:"User Profile",SCREEN_POLL_SUMMARY:"Poll Summary",POLL_DISPLAY_ACTIVE:"Open Poll",SCREEN_OPEN_POLL:"Open Poll",SCREEN_POLL_RESULTS:"Poll Complete",RECENT_POLL_COOKIE_PREFIX:"recent-poll-",LOCAL_SUBMISSION_EXPIRATION:336},g=(n(15),n.p+"static/media/loading-icon.11c01773.gif");function j(e,t,n){return new Promise((function(n,s){var a=Object.keys(t).reduce((function(e,n,s){return 0===s?"?"+n+"="+t[n]:e+"&"+n+"="+t[n]}),"?");fetch(e+a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}}).then((function(e){e.ok?e.clone().json().then((function(e){console.dir(e),n(e)})).catch((function(e){console.log(e),s(e)})):e.json().then((function(e){return s(e)}))})).catch((function(e){console.dir(e),s(e)}))}))}var b=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"getLeagueData",value:function(e){return j(h.SERVER_URL+"/boardgameleague",{season:e},!0)}},{key:"getSchedule",value:function(e){return j(h.SERVER_URL+"/schedule",{season:e},!0)}},{key:"getPowerRankings",value:function(e){return j(h.SERVER_URL+"/powerRankings",{season:e},!0)}}]),e}(),p=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getLeagueData",value:function(e){return new Promise((function(e,t){e({data:"data"})}))}},{key:"getSchedule",value:function(e){return new Promise((function(e,t){e({data:"data"})}))}},{key:"getPowerRankings",value:function(e){return new Promise((function(e,t){e({data:"data"})}))}}]),n}(b),O=h.MOCK_API?new p:new b;n(16);var m=n(0),f=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).accountInfoNavRef=a.a.createRef(),s.state={},s.getScheduleScreen=s.getScheduleScreen.bind(Object(u.a)(s)),s.loadingScreen=s.loadingScreen.bind(Object(u.a)(s)),s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"loadingScreen",value:function(){return Object(m.jsx)("div",{className:"loading-icon-container",children:Object(m.jsx)("img",{src:g,alt:"loading"})})}},{key:"displaySchedule",value:function(){var e=this;return console.log(this.props.schedule),this.props.schedule?this.props.schedule.map((function(t){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"bgl-week-container",children:[Object(m.jsx)("div",{className:"bgl-week-header",children:t.week+" - "+t.game}),Object(m.jsx)("div",{className:"bgl-week-subheader",children:t.dates}),Object(m.jsx)("div",{className:"bgl-week-table-container",children:Object(m.jsx)("table",{className:"bgl-week-table",cellPadding:"0",cellspacing:"0",children:e.getSingleScheduleTable(t)})})]})})})):Object(m.jsx)("div",{children:"could not load schedule"})}},{key:"getSingleScheduleTable",value:function(e){return e.results.map((function(e,t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("tr",{className:"bgl-table-row player-row",children:[Object(m.jsxs)("td",{className:"bgl-table-title-cell",children:["Group ",t+1]}),Object(m.jsx)("td",{className:"bgl-table-cell",children:e[0].player}),Object(m.jsx)("td",{className:"bgl-table-cell",children:e[1].player}),Object(m.jsx)("td",{className:"bgl-table-cell",children:e[2].player}),Object(m.jsx)("td",{className:"bgl-table-cell",children:e[3].player})]}),Object(m.jsxs)("tr",{className:"bgl-table-row placement-row",children:[Object(m.jsx)("td",{className:"bgl-table-subtitle-cell",children:"Placement"}),Object(m.jsx)("td",{className:"bgl-table-placement-cell",children:e[0].placement}),Object(m.jsx)("td",{className:"bgl-table-placement-cell",children:e[1].placement}),Object(m.jsx)("td",{className:"bgl-table-placement-cell",children:e[2].placement}),Object(m.jsx)("td",{className:"bgl-table-placement-cell",children:e[3].placement})]})]})}))}},{key:"getScheduleScreen",value:function(){return this.props.schedule&&this.props.schedule.length>0?Object(m.jsx)("div",{children:this.displaySchedule()}):this.props.error?Object(m.jsx)("div",{children:"There was an error loading the schedule"}):this.loadingScreen()}},{key:"render",value:function(){return Object(m.jsx)(m.Fragment,{children:this.getScheduleScreen()})}}]),n}(a.a.Component),v=(n(18),function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).accountInfoNavRef=a.a.createRef(),s.state={},s.getStandingsScreen=s.getStandingsScreen.bind(Object(u.a)(s)),s.loadingScreen=s.loadingScreen.bind(Object(u.a)(s)),s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"loadingScreen",value:function(){return Object(m.jsx)("div",{className:"loading-icon-container",children:Object(m.jsx)("img",{src:g,alt:"loading"})})}},{key:"displayStandings",value:function(){if(this.props.standings){var e=this.props.standings.map((function(e,t){return Object(m.jsxs)("tr",{className:"bgl-row",children:[Object(m.jsx)("td",{className:"bgl-standings-cell",children:t+1}),Object(m.jsx)("td",{className:"bgl-standings-cell",children:e.player}),Object(m.jsx)("td",{className:"bgl-standings-cell",children:e.points})]})}));return e.unshift(Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{className:"standings-row-header",children:"Position"}),Object(m.jsx)("td",{className:"standings-row-header",children:"Player"}),Object(m.jsx)("td",{className:"standings-row-header",children:"Points"})]})),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"power-ranking-header",children:"BGL Season 2 Standings"}),Object(m.jsx)("div",{className:"bgl-table-container",children:Object(m.jsx)("table",{className:"bgl-table",children:e})})]})}}},{key:"getStandingsScreen",value:function(){return this.props.standings?this.displayStandings():this.props.error?Object(m.jsx)("div",{children:"There was an error loading the standings"}):this.loadingScreen()}},{key:"render",value:function(){return Object(m.jsx)(m.Fragment,{children:this.getStandingsScreen()})}}]),n}(a.a.Component)),S=(n(19),function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).accountInfoNavRef=a.a.createRef(),s.state={},s.getResultsScreen=s.getResultsScreen.bind(Object(u.a)(s)),s.loadingScreen=s.loadingScreen.bind(Object(u.a)(s)),s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"loadingScreen",value:function(){return Object(m.jsx)("div",{className:"loading-icon-container",children:Object(m.jsx)("img",{src:g,alt:"loading"})})}},{key:"getResultsScreen",value:function(){return this.props.results?Object(m.jsx)("div",{children:"Showing results table"}):this.props.error?Object(m.jsx)("div",{children:"There was an error loading the results"}):this.loadingScreen()}},{key:"render",value:function(){return Object(m.jsx)(m.Fragment,{children:this.getResultsScreen()})}}]),n}(a.a.Component)),k=(n(20),function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).accountInfoNavRef=a.a.createRef(),s.state={},s.getPowerRankingsScreen=s.getPowerRankingsScreen.bind(Object(u.a)(s)),s.loadingScreen=s.loadingScreen.bind(Object(u.a)(s)),s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"loadingScreen",value:function(){return Object(m.jsx)("div",{className:"loading-icon-container",children:Object(m.jsx)("img",{src:g,alt:"loading"})})}},{key:"displayPowerRankings",value:function(){if(this.props.powerRankings){var e=this.props.powerRankings.values.map((function(e,t){return Object(m.jsxs)("tr",{className:"bgl-row",children:[Object(m.jsx)("td",{className:"bgl-power-cell",children:t+1}),Object(m.jsx)("td",{className:"bgl-power-cell",children:e})]})}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"power-ranking-header",children:"BGL Power Rankings"}),Object(m.jsx)("div",{className:"bgl-table-container",children:Object(m.jsx)("table",{className:"bgl-table",children:e})})]})}}},{key:"getPowerRankingsScreen",value:function(){return this.props.powerRankings?this.displayPowerRankings():this.props.error?Object(m.jsx)("div",{children:"There was an error loading the powerRankings"}):this.loadingScreen()}},{key:"render",value:function(){return Object(m.jsx)(m.Fragment,{children:this.getPowerRankingsScreen()})}}]),n}(a.a.Component));var x=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).displayTabsRef=a.a.createRef(),s.seasonToggleRef=a.a.createRef(),s.state={isLoading:!0,schedule:[],results:{},powerRankings:{},standings:{},displayedScreen:"schedule",season:2023,errors:{schedule:null,results:null,powerRankings:null,standings:null}},s.toggleDisplay=s.toggleDisplay.bind(Object(u.a)(s)),s.toggleSeason=s.toggleSeason.bind(Object(u.a)(s)),s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.loadSchedule(this.state.season),this.loadPowerRankings(this.state.season)}},{key:"loadSchedule",value:function(e){var t,n=this;(t=e,O.getSchedule(t)).then((function(e){if(400===e.code){var t=n.state.errors;t.schedule="Schedule info do not exist for this season",n.setState({errors:t,schedule:null,standings:null}),console.log(e.code),console.log("Could not load power rankings")}else{var s=function(e){var t=2*function(e){var t=0;if(e.values.length>1)for(var n=1;n<e.values.length&&!e.values[n][0].toLowerCase().includes("week");n++)t++;return t/2}(e)+1,n=[];return e.values.forEach((function(s,a){var c=a%t;if(0==c)n.push({week:s[0],game:s[1],dates:s[2],results:[]});else if(c%2===1){var l=e.values[a+1],r=n[n.length-1];r.results.push([]);for(var i=1;i<=4;i++){var o=r.results[r.results.length-1],d=l[i];o.push({player:s[i],placement:d})}}})),n}(e),a=function(e){var t={};e.forEach((function(e){e.results.forEach((function(e){e.forEach((function(e){var n;t[e.player]||(t[e.player]=0),e.placement&&(t[e.player]+=1==(n=e.placement)?3:2==n?2:3==n?1:0)}))}))}));var n=Object.keys(t).map((function(e){return{player:e,points:t[e]}}));return n.sort((function(e,t){return e.points>t.points?-1:1})),n}(s);n.setState({schedule:s,standings:a})}})).catch((function(e){var t=n.state.errors;t.schedule=e,n.setState({errors:t,schedule:null,standings:null}),console.log(e.code),console.log("Could not load schedule")}))}},{key:"loadPowerRankings",value:function(e){var t,n=this;(t=e,O.getPowerRankings(t)).then((function(e){if(400===e.code){var t=n.state.errors;t.powerRankings="Power Rankings do not exist for this season",n.setState({errors:t,powerRankings:null}),console.log(e.code),console.log("Could not load power rankings")}else n.setState({powerRankings:e})})).catch((function(e){var t=n.state.errors;t.powerRankings=e,n.setState({errors:t,powerRankings:null}),console.log(e.code),console.log("Could not load power rankings")}))}},{key:"getCurrentDisplay",value:function(){return"schedule"===this.state.displayedScreen?Object(m.jsx)(f,{schedule:this.state.schedule,error:this.state.errors.schedule}):"powerRankings"===this.state.displayedScreen?Object(m.jsx)(k,{powerRankings:this.state.powerRankings,error:this.state.errors.powerRankings}):"results"===this.state.displayedScreen?Object(m.jsx)(S,{schedule:this.state.schedule,error:this.state.errors.results}):"standings"===this.state.displayedScreen?Object(m.jsx)(v,{standings:this.state.standings,error:this.state.errors.standings}):Object(m.jsx)(f,{schedule:this.state.schedule,error:this.state.errors.schedule})}},{key:"toggleDisplay",value:function(e){var t=e.target.dataset.name;this.setState({displayedScreen:t}),this.displayTabsRef.current.querySelectorAll(".toggle-button").forEach((function(e){e.className.includes(" active")&&(e.className=e.className.replace(" active","")),e.dataset.name===t&&(e.className+=" active")}))}},{key:"getDisplayOptions",value:function(){var e=[];return this.state.schedule&&(e.push(Object(m.jsx)("div",{"data-name":"schedule",className:"toggle-button active",onClick:this.toggleDisplay,children:"Schedule"})),e.push(Object(m.jsx)("div",{"data-name":"standings",className:"toggle-button",onClick:this.toggleDisplay,children:"Standings"}))),this.state.powerRankings&&e.push(Object(m.jsx)("div",{"data-name":"powerRankings",className:"toggle-button",onClick:this.toggleDisplay,children:"Power Rankings"})),e}},{key:"toggleSeason",value:function(e){var t=e.target.dataset.name;this.seasonToggleRef.current.querySelectorAll(".season-button").forEach((function(e){e.className.includes(" active")&&(e.className=e.className.replace(" active","")),e.dataset.name===t&&(e.className+=" active")}));var n=this.state.season;t!=n&&(this.setState({season:t}),this.loadSchedule(t),this.loadPowerRankings(t))}},{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"season-toggle",ref:this.seasonToggleRef,children:[Object(m.jsx)("div",{"data-name":"2023",className:"season-button active",onClick:this.toggleSeason,children:"2023"}),Object(m.jsx)("div",{"data-name":"2022",className:"season-button",onClick:this.toggleSeason,children:"2022"})]}),Object(m.jsx)("div",{className:"bgl-header",children:"Board Game League"}),Object(m.jsx)("div",{className:"display-tabs",ref:this.displayTabsRef,children:this.getDisplayOptions()}),this.getCurrentDisplay()]})}}]),n}(a.a.Component),y=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={},s}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("head",{children:[Object(m.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"}),Object(m.jsx)("meta",{charset:"utf-8"}),Object(m.jsx)("meta",{"http-equiv":"X-UA-Compatible",content:"IE=edge,chrome=1"}),Object(m.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"}),Object(m.jsx)("link",{href:"https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css",rel:"stylesheet"}),Object(m.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Holtwood+One+SC",rel:"stylesheet",type:"text/css"}),Object(m.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Kaushan+Script|Herr+Von+Muellerhoff",rel:"stylesheet",type:"text/css"}),Object(m.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Abel",rel:"stylesheet",type:"text/css"}),Object(m.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Istok+Web|Roboto+Condensed:700",rel:"stylesheet",type:"text/css"}),Object(m.jsx)("title",{children:"Board Game League"})]}),Object(m.jsx)("div",{className:"App main-container",children:Object(m.jsx)(x,{})})]})}}]),n}(a.a.Component),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),s(e),a(e),c(e),l(e)}))};l.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(y,{})}),document.getElementById("root")),R()}],[[21,1,2]]]);
//# sourceMappingURL=main.60d59c8c.chunk.js.map